/*
 * jQuery The Final Countdown plugin v1.0.0 beta
 * http://github.com/hilios/jquery.countdown
 *
 * Copyright (c) 2011 Edson Hilios
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
(function(e){e.fn.countdown=function(t,n){function i(e,t){return function(){return t.call(e)}}var r=["seconds","minutes","hours","days","weeks","daysLeft"];return this.each(function(){function c(){l--,l<0&&(l=0),u={seconds:l%60,minutes:Math.floor(l/60)%60,hours:Math.floor(l/60/60)%24,days:Math.floor(l/60/60/24),weeks:Math.floor(l/60/60/24/7),daysLeft:Math.floor(l/60/60/24)%7};for(var e=0;e<r.length;e++){var t=r[e];o[t]!=u[t]&&(o[t]=u[t],h(t))}l==0&&(p(),h("finished"))}function h(r){var i=e.Event(r);if(s.closest("html").length===0){p(),n.call(s,e.Event("removed"));return}i.date=new Date((new Date).valueOf()+l),i.value=o[r]||"0",i.toDate=t,i.lasting=u;switch(r){case"seconds":case"minutes":case"hours":i.value=i.value<10?"0"+i.value.toString():i.value.toString();break;default:i.value&&(i.value=i.value.toString())}n.call(s,i)}function p(){clearInterval(a)}function d(){s.data("countdownInterval",setInterval(i(s,c),1e3)),a=s.data("countdownInterval")}if(!(t instanceof Date))if(String(t).match(/^[0-9]*$/))t=new Date(t);else if(t.match(/([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{2,4})\s([0-9]{1,2})\:([0-9]{2})\:([0-9]{2})/)||t.match(/([0-9]{2,4})\/([0-9]{1,2})\/([0-9]{1,2})\s([0-9]{1,2})\:([0-9]{2})\:([0-9]{2})/))t=new Date(t);else{if(!t.match(/([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{2,4})/)&&!t.match(/([0-9]{2,4})\/([0-9]{1,2})\/([0-9]{1,2})/))throw new Error("Doesn't seen to be a valid date object or string");t=new Date(t)}var s=e(this),o={},u={},a=s.data("countdownInterval"),f=new Date,l=Math.floor((t.valueOf()-f.valueOf())/1e3);c(),a&&p(),d()})}})(jQuery)